<<$ Math Library for Mini Lang
    Library Manager handles all functions and calls to them.
$>>

proc sqrt(int x) => {
    if(x == 0) {
        result => {0};
    }

    double x_double = x * 1.0; >>$force double conversion
    double guess = x_double / 2.0;
    double epsilon = 0.000001;

    check ((abs(guess * guess -  x_double)) > epsilon) {
        guess = (guess + (x_double / guess)) / 2.0;
    }

    result => {guess};
}

proc abs(int x) => {
    if (x < 0) {
        result => {-x};
    } else {
        result => {x};
    }
}